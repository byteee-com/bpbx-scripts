"use strict";(self.webpackChunkant_design_pro=self.webpackChunkant_design_pro||[]).push([[333],{64317:function(Q,$,e){var Z=e(1413),T=e(91),U=e(22270),t=e(67294),x=e(66758),j=e(76897),K=e(85893),C=["fieldProps","children","params","proFieldProps","mode","valueEnum","request","showSearch","options"],M=["fieldProps","children","params","proFieldProps","mode","valueEnum","request","options"],N=function(f,y){var E=f.fieldProps,D=f.children,l=f.params,w=f.proFieldProps,A=f.mode,B=f.valueEnum,I=f.request,L=f.showSearch,o=f.options,W=(0,T.Z)(f,C),z=(0,t.useContext)(x.Z);return(0,K.jsx)(j.Z,(0,Z.Z)((0,Z.Z)({valueEnum:(0,U.h)(B),request:I,params:l,valueType:"select",filedConfig:{customLightMode:!0},fieldProps:(0,Z.Z)({options:o,mode:A,showSearch:L,getPopupContainer:z.getPopupContainer},E),ref:y,proFieldProps:w},W),{},{children:D}))},V=t.forwardRef(function(g,f){var y=g.fieldProps,E=g.children,D=g.params,l=g.proFieldProps,w=g.mode,A=g.valueEnum,B=g.request,I=g.options,L=(0,T.Z)(g,M),o=(0,Z.Z)({options:I,mode:w||"multiple",labelInValue:!0,showSearch:!0,suffixIcon:null,autoClearSearchValue:!0,optionLabelProp:"label"},y),W=(0,t.useContext)(x.Z);return(0,K.jsx)(j.Z,(0,Z.Z)((0,Z.Z)({valueEnum:(0,U.h)(A),request:B,params:D,valueType:"select",filedConfig:{customLightMode:!0},fieldProps:(0,Z.Z)({getPopupContainer:W.getPopupContainer},o),ref:f,proFieldProps:l},L),{},{children:E}))}),k=t.forwardRef(N),Y=V,b=k;b.SearchSelect=Y,b.displayName="ProFormComponent",$.Z=b},92198:function(Q,$,e){e.r($),e.d($,{default:function(){return se}});var Z=e(27424),T=e.n(Z),U=e(17061),t=e.n(U),x=e(42122),j=e.n(x),K=e(17156),C=e.n(K),M=e(2618),N=e(82061),V=e(90930),k=e(18562),Y=e(37476),b=e(5966),g=e(64317),f=e(1413),y=e(91),E=e(67294),D=e(76897),l=e(85893),w=["fieldProps","request","params","proFieldProps"],A=function(c,h){var v=c.fieldProps,u=c.request,S=c.params,r=c.proFieldProps,d=(0,y.Z)(c,w);return(0,l.jsx)(D.Z,(0,f.Z)({valueType:"treeSelect",fieldProps:v,ref:h,request:u,params:S,filedConfig:{customLightMode:!0},proFieldProps:r},d))},B=E.forwardRef(A),I=B,L=e(9927),o=e(2453),W=e(66309),z=e(86738),X=e(14726),q=e(69215),_=function(){var R=C()(t()().mark(function c(h){var v,u;return t()().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return v=o.ZP.loading("\u6B63\u5728\u6DFB\u52A0"),r.prev=1,r.next=4,(0,M.rg)(j()({},h));case 4:if(u=r.sent,v(),!(u!=null&&u.success)){r.next=11;break}return o.ZP.success("\u6DFB\u52A0\u6210\u529F"),r.abrupt("return",!0);case 11:return o.ZP.error(u.msg),r.abrupt("return",!1);case 13:r.next=20;break;case 15:return r.prev=15,r.t0=r.catch(1),v(),o.ZP.error("\u63A5\u53E3\u9519\u8BEF"),r.abrupt("return",!1);case 20:case"end":return r.stop()}},c,null,[[1,15]])}));return function(h){return R.apply(this,arguments)}}(),ee=function(){var R=C()(t()().mark(function c(h,v){var u,S;return t()().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:return u=o.ZP.loading("\u66F4\u65B0\u4E2D..."),d.prev=1,d.next=4,(0,M.aw)(h,v);case 4:if(S=d.sent,u(),!(S!=null&&S.success)){d.next=11;break}return o.ZP.success("\u66F4\u65B0\u6210\u529F"),d.abrupt("return",!0);case 11:return o.ZP.error(S.msg),d.abrupt("return",!1);case 13:d.next=20;break;case 15:return d.prev=15,d.t0=d.catch(1),u(),o.ZP.error("\u66F4\u65B0\u5931\u8D25"),d.abrupt("return",!1);case 20:case"end":return d.stop()}},c,null,[[1,15]])}));return function(h,v){return R.apply(this,arguments)}}(),re=function(){var R=C()(t()().mark(function c(h){var v,u;return t()().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return v=o.ZP.loading("\u6B63\u5728\u5220\u9664"),r.prev=1,r.next=4,(0,M.CG)(h);case 4:if(u=r.sent,v(),!(u!=null&&u.success)){r.next=11;break}return o.ZP.success("\u5220\u9664\u6210\u529F"),r.abrupt("return",!0);case 11:return o.ZP.error(u.msg),r.abrupt("return",!1);case 13:r.next=20;break;case 15:return r.prev=15,r.t0=r.catch(1),v(),o.ZP.error("\u5220\u9664\u5931\u8D25"),r.abrupt("return",!1);case 20:case"end":return r.stop()}},c,null,[[1,15]])}));return function(h){return R.apply(this,arguments)}}(),ae=function(){var c=(0,E.useState)(!1),h=T()(c,2),v=h[0],u=h[1],S=(0,E.useState)([]),r=T()(S,2),d=r[0],ne=r[1],O=(0,E.useRef)(),te=(0,E.useState)(),J=T()(te,2),G=J[0],H=J[1],F=(0,L.useIntl)(),ue=function(){var P=C()(t()().mark(function i(a){var s,p,n;return t()().wrap(function(m){for(;;)switch(m.prev=m.next){case 0:if(a){m.next=2;break}return m.abrupt("return",!0);case 2:return m.next=4,(0,M.Fk)({ids:a.map(function(oe){return oe.id})});case 4:s=m.sent,s!=null&&s.success?((p=O.current)===null||p===void 0||p.clearSelected(),o.ZP.success(F.formatMessage({id:"pages.delete.success",defaultMessage:"\u5220\u9664\u6210\u529F"})),(n=O.current)===null||n===void 0||n.reload()):o.ZP.error(F.formatMessage({id:"pages.delete.failure",defaultMessage:"\u5220\u9664\u5931\u8D25"}));case 6:case"end":return m.stop()}},i)}));return function(a){return P.apply(this,arguments)}}(),le=[{title:"\u540D\u79F0",dataIndex:"name"},{title:"\u53F7\u7801",dataIndex:"number"},{title:"\u6210\u5458",search:!1,dataIndex:["extensions"],render:function(i,a){return(a==null?void 0:a.extensions)&&a.extensions.map(function(s){return(0,l.jsx)(W.Z,{children:s.extension.name})})}},{title:"\u64CD\u4F5C",dataIndex:"option",valueType:"option",render:function(i,a){return[(0,l.jsx)("a",{onClick:function(){u(!0);var p=a.extensions.map(function(n){return n.extension.id});H(j()(j()({},a),{},{extensions:p})),console.log(a)},children:"\u7F16\u8F91"},"edit"),(0,l.jsx)(z.Z,{title:"\u786E\u8BA4\u5220\u9664",description:"\u6570\u636E\u5220\u9664\u540E\u5C06\u65E0\u6CD5\u6062\u590D",onConfirm:C()(t()().mark(function s(){var p,n;return t()().wrap(function(m){for(;;)switch(m.prev=m.next){case 0:if(a!=null&&a.id){m.next=2;break}return m.abrupt("return");case 2:return m.next=4,re(a.id);case 4:p=m.sent,p&&((n=O.current)===null||n===void 0||n.reload());case 6:case"end":return m.stop()}},s)})),okText:F.formatMessage({id:"pages.confirm",defaultMessage:"\u786E\u5B9A"}),cancelText:F.formatMessage({id:"pages.cancel",defaultMessage:"\u53D6\u6D88"}),children:(0,l.jsx)("a",{className:"text-danger",children:"\u5220\u9664"},"delete")})]}}];return(0,l.jsxs)(V._z,{children:[(0,l.jsx)(k.Z,{headerTitle:"\u5BF9\u8BB2/\u5E7F\u64AD\u7EC4",actionRef:O,rowKey:"id",search:{labelWidth:120},toolBarRender:function(){return[(0,l.jsx)(X.ZP,{type:"primary",onClick:function(){u(!0)},children:"\u521B\u5EFA"},"primary")]},request:M.Fh,columns:le,tableAlertOptionRender:function(){return(0,l.jsx)(q.T,{size:16,children:(0,l.jsxs)(z.Z,{title:F.formatMessage({id:"pages.delete.confirm.title",defaultMessage:"\u786E\u8BA4\u5220\u9664\uFF1F"}),description:F.formatMessage({id:"pages.delete.confirm.description",defaultMessage:"\u6570\u636E\u5220\u9664\u540E\u5C06\u65E0\u6CD5\u6062\u590D,\u662F\u5426\u5220\u9664\uFF1F"}),onConfirm:C()(t()().mark(function i(){return t()().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:ue(d);case 1:case"end":return s.stop()}},i)})),okText:F.formatMessage({id:"pages.confirm",defaultMessage:"\u786E\u5B9A"}),cancelText:F.formatMessage({id:"pages.cancel",defaultMessage:"\u53D6\u6D88"}),children:[(0,l.jsxs)("a",{style:{color:"red"},children:[(0,l.jsx)(N.Z,{}),F.formatMessage({id:"pages.delete",defaultMessage:"\u5220\u9664"})]})," "]})})},rowSelection:{onChange:function(i,a){ne(a)}}}),(0,l.jsxs)(Y.Y,{title:G?"\u7F16\u8F91\u5BFB\u547C\u7EC4":"\u65B0\u5EFA\u5BFB\u547C\u7EC4",width:"400px",open:v,onOpenChange:u,initialValues:G,modalProps:{destroyOnClose:!0,onCancel:function(){H(void 0)}},onFinish:function(){var P=C()(t()().mark(function i(a){var s;return t()().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(!G){n.next=6;break}return n.next=3,ee(G.id,a);case 3:n.t0=n.sent,n.next=9;break;case 6:return n.next=8,_(a);case 8:n.t0=n.sent;case 9:s=n.t0,s&&(u(!1),H(void 0),O.current&&O.current.reload());case 11:case"end":return n.stop()}},i)}));return function(i){return P.apply(this,arguments)}}(),children:[(0,l.jsx)(b.Z,{label:"\u540D\u79F0",rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u540D\u79F0"}],width:"md",name:"name"}),(0,l.jsx)(b.Z,{label:"\u53F7\u7801",rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u53F7\u7801"}],width:"md",name:"number"}),(0,l.jsx)(g.Z,{label:"\u6210\u5458",mode:"multiple",rules:[{required:!0,message:"\u8BF7\u9009\u62E9\u6210\u5458"}],width:"md",request:C()(t()().mark(function P(){var i,a;return t()().wrap(function(p){for(;;)switch(p.prev=p.next){case 0:return p.next=2,(0,M.zS)({current:1,pageSize:1e3});case 2:if(i=p.sent,!i.success){p.next=6;break}return a=i.data.map(function(n){return{label:n.name,value:n.id}}),p.abrupt("return",a);case 6:return p.abrupt("return",[]);case 7:case"end":return p.stop()}},P)})),name:"extensions"}),(0,l.jsx)(I,{label:"\u63D0\u793A\u97F3",width:"md",fieldProps:{showSearch:!0,fieldNames:{label:"name",value:"path"}},request:C()(t()().mark(function P(){var i;return t()().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.next=2,(0,M.Tk)();case 2:if(i=s.sent,!i.success){s.next=5;break}return s.abrupt("return",i.data);case 5:return s.abrupt("return",[]);case 6:case"end":return s.stop()}},P)})),name:"sounds"})]})]})},se=ae}}]);

"use strict";(self.webpackChunkant_design_pro=self.webpackChunkant_design_pro||[]).push([[333],{64317:function(J,K,e){var M=e(1413),b=e(91),F=e(22270),s=e(67294),w=e(66758),R=e(19323),x=e(85893),P=["fieldProps","children","params","proFieldProps","mode","valueEnum","request","showSearch","options"],O=["fieldProps","children","params","proFieldProps","mode","valueEnum","request","options"],z=function(_,l){var B=_.fieldProps,U=_.children,A=_.params,I=_.proFieldProps,C=_.mode,t=_.valueEnum,Z=_.request,L=_.showSearch,S=_.options,W=(0,b.Z)(_,P),D=(0,s.useContext)(w.Z);return(0,x.jsx)(R.Z,(0,M.Z)((0,M.Z)({valueEnum:(0,F.h)(t),request:Z,params:A,valueType:"select",filedConfig:{customLightMode:!0},fieldProps:(0,M.Z)({options:S,mode:C,showSearch:L,getPopupContainer:D.getPopupContainer},B),ref:l,proFieldProps:I},W),{},{children:U}))},$=s.forwardRef(function(c,_){var l=c.fieldProps,B=c.children,U=c.params,A=c.proFieldProps,I=c.mode,C=c.valueEnum,t=c.request,Z=c.options,L=(0,b.Z)(c,O),S=(0,M.Z)({options:Z,mode:I||"multiple",labelInValue:!0,showSearch:!0,suffixIcon:null,autoClearSearchValue:!0,optionLabelProp:"label"},l),W=(0,s.useContext)(w.Z);return(0,x.jsx)(R.Z,(0,M.Z)((0,M.Z)({valueEnum:(0,F.h)(C),request:t,params:U,valueType:"select",filedConfig:{customLightMode:!0},fieldProps:(0,M.Z)({getPopupContainer:W.getPopupContainer},S),ref:_,proFieldProps:A},L),{},{children:B}))}),G=s.forwardRef(z),V=$,T=G;T.SearchSelect=V,T.displayName="ProFormComponent",K.Z=T},51408:function(J,K,e){e.r(K);var M=e(27424),b=e.n(M),F=e(17061),s=e.n(F),w=e(42122),R=e.n(w),x=e(17156),P=e.n(x),O=e(2618),z=e(82061),$=e(11774),G=e(49100),V=e(37476),T=e(5966),c=e(64317),_=e(9927),l=e(45360),B=e(66309),U=e(86738),A=e(15867),I=e(69215),C=e(67294),t=e(85893),Z=function(){var D=P()(s()().mark(function h(f){var m;return s()().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return m=l.ZP.loading("\u6B63\u5728\u6DFB\u52A0"),n.prev=1,n.next=4,(0,O.rg)(R()({},f));case 4:return m(),l.ZP.success("\u6DFB\u52A0\u6210\u529F"),n.abrupt("return",!0);case 9:return n.prev=9,n.t0=n.catch(1),m(),l.ZP.error("\u6DFB\u52A0\u5931\u8D25"),n.abrupt("return",!1);case 14:case"end":return n.stop()}},h,null,[[1,9]])}));return function(f){return D.apply(this,arguments)}}(),L=function(){var D=P()(s()().mark(function h(f,m){var v;return s()().wrap(function(p){for(;;)switch(p.prev=p.next){case 0:return v=l.ZP.loading("\u66F4\u65B0\u4E2D..."),p.prev=1,p.next=4,(0,O.aw)(f,m);case 4:return v(),l.ZP.success("\u66F4\u65B0\u6210\u529F"),p.abrupt("return",!0);case 9:return p.prev=9,p.t0=p.catch(1),v(),l.ZP.error("\u66F4\u65B0\u5931\u8D25"),p.abrupt("return",!1);case 14:case"end":return p.stop()}},h,null,[[1,9]])}));return function(f,m){return D.apply(this,arguments)}}(),S=function(){var D=P()(s()().mark(function h(f){var m;return s()().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return m=l.ZP.loading("\u6B63\u5728\u5220\u9664"),n.prev=1,n.next=4,(0,O.CG)(f);case 4:return m(),l.ZP.success("\u5220\u9664\u6210\u529F"),n.abrupt("return",!0);case 9:return n.prev=9,n.t0=n.catch(1),m(),l.ZP.error("\u5220\u9664\u5931\u8D25"),n.abrupt("return",!1);case 14:case"end":return n.stop()}},h,null,[[1,9]])}));return function(f){return D.apply(this,arguments)}}(),W=function(){var h=(0,C.useState)(!1),f=b()(h,2),m=f[0],v=f[1],n=(0,C.useState)(!1),p=b()(n,2),se=p[0],te=p[1],Q=(0,C.useState)([]),Y=b()(Q,2),X=Y[0],k=Y[1],j=(0,C.useRef)(),q=(0,C.useState)(),H=b()(q,2),y=H[0],N=H[1],g=(0,_.useIntl)(),ee=function(){var E=P()(s()().mark(function o(r){var i,u,a;return s()().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:if(r){d.next=2;break}return d.abrupt("return",!0);case 2:return d.next=4,(0,O.Fk)({ids:r.map(function(ne){return ne.id})});case 4:i=d.sent,i.success?((u=j.current)===null||u===void 0||u.clearSelected(),l.ZP.success(g.formatMessage({id:"pages.delete.success",defaultMessage:"\u5220\u9664\u6210\u529F"})),(a=j.current)===null||a===void 0||a.reload()):l.ZP.error(g.formatMessage({id:"pages.delete.failure",defaultMessage:"\u5220\u9664\u5931\u8D25"}));case 6:case"end":return d.stop()}},o)}));return function(r){return E.apply(this,arguments)}}(),re=[{title:"\u540D\u79F0",dataIndex:"name"},{title:"\u53F7\u7801",dataIndex:"number"},{title:"\u6210\u5458",search:!1,dataIndex:["extensions"],render:function(o,r){return(r==null?void 0:r.extensions)&&r.extensions.map(function(i){return(0,t.jsx)(B.Z,{children:i.extension.number})})}},{title:"\u64CD\u4F5C",dataIndex:"option",valueType:"option",render:function(o,r){return[(0,t.jsx)("a",{onClick:function(){v(!0);var u=r.extensions.map(function(a){return a.extension.id});N(R()(R()({},r),{},{extensions:u})),console.log(r)},children:"\u7F16\u8F91"},"edit"),(0,t.jsx)(U.Z,{title:"\u786E\u8BA4\u5220\u9664",description:"\u6570\u636E\u5220\u9664\u540E\u5C06\u65E0\u6CD5\u6062\u590D",onConfirm:P()(s()().mark(function i(){var u,a;return s()().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:if(r!=null&&r.id){d.next=2;break}return d.abrupt("return");case 2:return d.next=4,S(r.id);case 4:u=d.sent,u?(l.ZP.success("\u5220\u9664\u6210\u529F"),(a=j.current)===null||a===void 0||a.reload()):l.ZP.error("\u5220\u9664");case 6:case"end":return d.stop()}},i)})),okText:g.formatMessage({id:"pages.confirm",defaultMessage:"\u786E\u5B9A"}),cancelText:g.formatMessage({id:"pages.cancel",defaultMessage:"\u53D6\u6D88"}),children:(0,t.jsx)("a",{className:"text-danger",children:"\u5220\u9664"},"delete")})]}}];return(0,t.jsxs)($._z,{children:[(0,t.jsx)(G.Z,{headerTitle:"\u5BFB\u547C\u7EC4\u914D\u7F6E",actionRef:j,rowKey:"id",search:{labelWidth:120},toolBarRender:function(){return[(0,t.jsx)(A.ZP,{type:"primary",onClick:function(){v(!0)},children:"\u521B\u5EFA"},"primary")]},request:O.Fh,columns:re,tableAlertOptionRender:function(){return(0,t.jsx)(I.T,{size:16,children:(0,t.jsxs)(U.Z,{title:g.formatMessage({id:"pages.delete.confirm.title",defaultMessage:"\u786E\u8BA4\u5220\u9664\uFF1F"}),description:g.formatMessage({id:"pages.delete.confirm.description",defaultMessage:"\u6570\u636E\u5220\u9664\u540E\u5C06\u65E0\u6CD5\u6062\u590D,\u662F\u5426\u5220\u9664\uFF1F"}),onConfirm:P()(s()().mark(function o(){return s()().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:ee(X);case 1:case"end":return i.stop()}},o)})),okText:g.formatMessage({id:"pages.confirm",defaultMessage:"\u786E\u5B9A"}),cancelText:g.formatMessage({id:"pages.cancel",defaultMessage:"\u53D6\u6D88"}),children:[(0,t.jsxs)("a",{style:{color:"red"},children:[(0,t.jsx)(z.Z,{}),g.formatMessage({id:"pages.delete",defaultMessage:"\u5220\u9664"})]})," "]})})},rowSelection:{onChange:function(o,r){k(r)}}}),(0,t.jsxs)(V.Y,{title:y?"\u7F16\u8F91\u5BFB\u547C\u7EC4":"\u65B0\u5EFA\u5BFB\u547C\u7EC4",width:"400px",open:m,onOpenChange:v,initialValues:y,modalProps:{destroyOnClose:!0,onCancel:function(){N(void 0)}},onFinish:function(){var E=P()(s()().mark(function o(r){var i;return s()().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:if(!y){a.next=6;break}return a.next=3,L(y.id,r);case 3:a.t0=a.sent,a.next=9;break;case 6:return a.next=8,Z(r);case 8:a.t0=a.sent;case 9:i=a.t0,i&&(v(!1),N(void 0),j.current&&j.current.reload());case 11:case"end":return a.stop()}},o)}));return function(o){return E.apply(this,arguments)}}(),children:[(0,t.jsx)(T.Z,{label:"\u540D\u79F0",rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u540D\u79F0"}],width:"md",name:"name"}),(0,t.jsx)(T.Z,{label:"\u53F7\u7801",rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u53F7\u7801"}],width:"md",name:"number"}),(0,t.jsx)(c.Z,{label:"\u6210\u5458",mode:"multiple",rules:[{required:!0,message:"\u8BF7\u9009\u62E9\u6210\u5458"}],width:"md",request:P()(s()().mark(function E(){var o,r;return s()().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return u.next=2,(0,O.fU)({current:1,pageSize:1e3});case 2:if(o=u.sent,!o.success){u.next=6;break}return r=o.data.map(function(a){return{label:a.number,value:a.id}}),u.abrupt("return",r);case 6:return u.abrupt("return",[]);case 7:case"end":return u.stop()}},E)})),name:"extensions"})]})]})};K.default=W}}]);
